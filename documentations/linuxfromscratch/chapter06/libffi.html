<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      6.49.&nbsp;Libffi-3.2.1
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body class="lfs" id="lfs-8.4">
    <div class="navheader">
      <h4>
        Linux From Scratch - Version 8.4
      </h4>
      <h3>
        Chapitre&nbsp;6.&nbsp;Installer les logiciels du système de base
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="libelf.html" title=
          "Libelf de Elfutils-0.176">Précédent</a>
          <p>
            Libelf de Elfutils-0.176
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="openssl.html" title=
          "OpenSSL-1.1.1a">Suivant</a>
          <p>
            OpenSSL-1.1.1a
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter06.html" title=
          "Chapitre&nbsp;6.&nbsp;Installer les logiciels du système de base">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version 8.4 ">Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="wrap" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="ch-system-libffi" name="ch-system-libffi"></a>6.49.
        Libffi-3.2.1
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <p>
          La bibliothèque Libffi fournit une interface portable et
          haut-niveau pour diverses conventions d'appel. Cela permet au
          programmeur d'appeler des fonctions spécifiées par une interface
          d'appel décrite à l'exécution.
        </p>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Temps de construction
              approximatif:</strong> <span class="segbody">0.3 SBU</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Espace disque requis:</strong>
              <span class="segbody">7.6 Mo</span>
            </div>
          </div>
        </div>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          6.49.1. Installation de Libffi
        </h2>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Comme pour GMP, libffi est construit avec des optimisations
            spécifiques au processeur utilisé. Si vous construisez pour un
            autre système, exportez CFLAGS et CXXFLAGS pour spécifier une
            construction générique pour votre architecture. Si vous ne faites
            pas cela, des erreurs de type opération illégale apparaîtront à
            l'édition des liens.
          </p>
        </div>
        <p>
          Modifiez le Makefile pour installer les en-têtes dans le répertoire
          standard <code class="filename">/usr/include</code> plutôt que
          <code class="filename">/usr/lib/libffi-3.2.1/include</code>.
        </p>
        <pre class="userinput"><kbd class=
        "command">sed -e '/^includesdir/ s/$(libdir).*$/$(includedir)/' \
    -i include/Makefile.in

sed -e '/^includedir/ s/=.*$/=@includedir@/' \
    -e 's/^Cflags: -I${includedir}/Cflags:/' \
    -i libffi.pc.in</kbd></pre>
        <p>
          Préparez libffi à la compilation&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">./configure --prefix=/usr --disable-static --with-gcc-arch=native</kbd></pre>
        <div class="variablelist">
          <p class="title">
            <strong>Voici la signification des options de configuration
            :</strong>
          </p>
          <dl class="variablelist">
            <dt>
              <span class="term"><em class=
              "parameter"><code>--with-gcc-arch=native</code></em></span>
            </dt>
            <dd>
              <p>
                S'assure que gcc active les optimisations pour le système
                actuel. Si l'option n'est pas spécifiée, il essaiera de
                deviner le système et le code généré peut ne pas être correct
                pour certains systèmes. Si le code généré est copié du
                système actuel vers un système avec moins de fonctionnalités,
                utilisez le système avec moins de fonctionnalités dans le
                paramètre. Pour des détails sur les types de systèmes
                alternatifs, voyez <a class="ulink" href=
                "https://gcc.gnu.org/onlinedocs/gcc-8.2.0/gcc/x86-Options.html">
                les options x86 dans le manuel de gcc</a>.
              </p>
            </dd>
          </dl>
        </div>
        <p>
          Compilez le paquet&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">make</kbd></pre>
        <p>
          Pour tester les résultats, lancez&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">make check</kbd></pre>
        <p>
          Installez le paquet&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">make install</kbd></pre>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          <a id="contents-libffi" name="contents-libffi"></a>6.49.2. Contenu
          de Libffi
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Bibliothèque installée:</strong>
              <span class="segbody">libffi.so</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="libffi" name="libffi"></a><span class=
                    "term"><code class="filename">libffi</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    contient les fonctions de l'API le libffi.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="libelf.html" title=
          "Libelf de Elfutils-0.176">Précédent</a>
          <p>
            Libelf de Elfutils-0.176
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="openssl.html" title=
          "OpenSSL-1.1.1a">Suivant</a>
          <p>
            OpenSSL-1.1.1a
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter06.html" title=
          "Chapitre&nbsp;6.&nbsp;Installer les logiciels du système de base">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version 8.4 ">Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
