<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      Mesa-18.3.3
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-8.4">
    <div class="navheader">
      <h4>
        Au-delà&nbsp;de Linux<sup>®</sup> From Scratch - Version 8.4
      </h4>
      <h3>
        Chapitre&nbsp;24.&nbsp;Environnement X Window System
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="xcb-util-cursor.html" title=
          "xcb-util-cursor-0.1.3">Précédent</a>
          <p>
            xcb-util-cursor-0.1.3
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="xbitmaps.html" title=
          "xbitmaps-1.1.2">Suivant</a>
          <p>
            xbitmaps-1.1.2
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="installing.html" title=
          "Chapitre&nbsp;24.&nbsp;Environnement X Window System">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà&nbsp;de Linux® From Scratch - Version 8.4">Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="mesa" name="mesa"></a>Mesa-18.3.3
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à Mesa
        </h2>
        <p>
          <span class="application">Mesa</span> est une bibliothèque
          graphique 3D compatible avec OpenGL.
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            <span class="application">Mesa</span> est mis à jour
            régulièrement. Vous pourriez vouloir utiliser la dernière version
            18.3.x disponible.
          </p>
        </div>
        <p>
          Ce paquet est connu pour se construire correctement sur une
          plateforme LFS-8.4.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "https://mesa.freedesktop.org/archive/mesa-18.3.3.tar.xz">https://mesa.freedesktop.org/archive/mesa-18.3.3.tar.xz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=
                "ftp://ftp.freedesktop.org/pub/mesa/mesa-18.3.3.tar.xz">ftp://ftp.freedesktop.org/pub/mesa/mesa-18.3.3.tar.xz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                e9d1a24dbd5ca20efa75b9a29eb4566f
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 11 Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 361 Mo (avec les
                démos et les docs, plus 89 Mo pour les tests)
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: 2.3 SBU (en
                utilisant parallélisme=4 avec les démos et les docs, plus 1.1
                SBU pour les tests)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Téléchargements supplémentaires
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Correctif recommandé&nbsp;: <a class="ulink" href=
                "http://www.linuxfromscratch.org/patches/blfs/8.4/mesa-18.3.3-add_xdemos-1.patch">
                http://www.linuxfromscratch.org/patches/blfs/8.4/mesa-18.3.3-add_xdemos-1.patch</a>
                (installe 2 progammes de démo pour tester Mesa - pas
                nécessaire si vous installez le paquet <a class="ulink" href=
                "ftp://ftp.freedesktop.org/pub/mesa/demos/">mesa-demos</a>)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Dépendances de Mesa
        </h3>
        <h4>
          Requises
        </h4>
        <p class="required">
          <a class="xref" href="x7lib.html" title=
          "Bibliothèques Xorg">Bibliothèques Xorg</a>, <a class="xref" href=
          "libdrm.html" title="libdrm-2.4.97">libdrm-2.4.97</a> et <a class=
          "xref" href="../general/python-modules.html#Mako" title=
          "Mako-1.0.7">Mako-1.0.7</a>
        </p>
        <h4>
          Recommandées
        </h4>
        <p class="recommended">
          <a class="xref" href="x7driver.html#libvdpau" title=
          "libvdpau-1.1.1">libvdpau-1.1.1</a> (pour construire les pilotes
          VDPAU), <a class="xref" href="../general/llvm.html" title=
          "LLVM-7.0.1">LLVM-7.0.1</a> (requis pour les pilotes Gallium3D,
          r300 et radeonsi et pour le rasteriseur logiciel llvmpipe. Voir
          <a class="ulink" href=
          "http://www.mesa3d.org/systems.html">http://www.mesa3d.org/systems.html</a>
          pour plus d'information) et <a class="xref" href=
          "../general/wayland-protocols.html" title=
          "Wayland-Protocols-1.17">wayland-protocols-1.17</a> (requis pour
          <a class="xref" href="../kde/plasma-all.html" title=
          "Construction de Plasma 5">Plasma-5.15.0</a>, GNOME et recommandé
          pour <a class="xref" href="gtk3.html" title=
          "GTK+-3.24.5">GTK+-3.24.5</a>)
        </p>
        <h4>
          Facultatives
        </h4>
        <p class="optional">
          <a class="xref" href="../general/libgcrypt.html" title=
          "libgcrypt-1.8.4">libgcrypt-1.8.4</a>, <a class="xref" href=
          "../postlfs/nettle.html" title="Nettle-3.4.1">Nettle-3.4.1</a>,
          <a class="xref" href="../general/python2.html" title=
          "Python-2.7.15">Python-2.7.15</a> (inutile si Python3 est présent),
          <a class="ulink" href=
          "ftp://ftp.freedesktop.org/pub/mesa/demos/">mesa-demos</a> (fournit
          plus de 300 démos supplémentaires pour tester <span class=
          "application">Mesa</span>&nbsp;; ceci inclut les même programmes
          que ceux ajoutés par le correctif ci-dessus) et <a class="ulink"
          href="http://omxil.sourceforge.net/">Bellagio OpenMAX Integration
          Layer</a> (pour les plateformes mobiles)
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Les instructions considèrent que <span class=
            "application">LLVM</span> avec les moteurs hôte et r600/amdgpu
            est installé. Vous devrez modifier les instructions si vous
            choisissez de ne pas l'installer. Pour une explication de
            Gallium3D merci de regarder <a class="ulink" href=
            "https://fr.wikipedia.org/wiki/Gallium3D">https://fr.wikipedia.org/wiki/Gallium3D</a>.
          </p>
        </div>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "http://wiki.linuxfromscratch.org/blfs/wiki/mesa">http://wiki.linuxfromscratch.org/blfs/wiki/mesa</a>
        </p>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de Mesa
        </h2>
        <p>
          Si vous avez téléchargé le correctif xdemos (nécessaire pour tester
          l'installation de Xorg par les instructions de BLFS), appliquez-le
          en lançant la commande suivante&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">patch -Np1 -i ../mesa-18.3.3-add_xdemos-1.patch</kbd></pre>
        <p>
          Maintenant sélectionnez les pilotes que vous souhaitez installer.
          Les pilotes disponibles sont i915, nouveau, r300, r600, radeonsi,
          freedreno, pl111, svga, swrast, swr, tegra, v3d, vc4, virgl,
          etnaviv et imx. Si les pilotes Gallium ne sont pas spécifiés, la
          valeur par défaut est «&nbsp;r300,r600,svga,swrast&nbsp;». Modifiez
          la commande ci-dessous pour indiquer les pilotes désirés. Les
          pilotes listés ci-dessous prendront en charge la plupart des cartes
          graphiques modernes. Pour de l'aide à la sélection des pilotes,
          voir <a class="ulink" href=
          "http://www.mesa3d.org/systems.html">http://www.mesa3d.org/systems.html</a>.
        </p>
        <pre class="userinput"><kbd class=
        "command">GLL_DRV="i915,nouveau,radeonsi,svga,swrast"</kbd></pre>
        <p>
          Installez <span class="application">Mesa</span> en lançant les
          commandes suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">./configure CFLAGS='-O2' CXXFLAGS='-O2' LDFLAGS=-lLLVM \
            --prefix=$XORG_PREFIX              \
            --sysconfdir=/etc                  \
            --enable-osmesa                    \
            --enable-xa                        \
            --enable-glx-tls                   \
            --with-platforms="drm,x11,wayland" \
            --with-gallium-drivers=$GLL_DRV    &amp;&amp;

unset GLL_DRV &amp;&amp;

make</kbd></pre>
        <p>
          Si vous avez appliqué le correctif Xdemos, construisez les
          programmes de démo en lançant la commande suivante&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">make -C xdemos DEMOS_PREFIX=$XORG_PREFIX</kbd></pre>
        <p>
          Pour tester les résultats lancez&nbsp;: <span class=
          "command"><strong>make -k check</strong></span>.
        </p>
        <p>
          Maintenant, en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class="command">make install</kbd></pre>
        <p>
          Si vous avez construit les programmes de démo, installez les en
          lançant la commande suivante en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">make -C xdemos DEMOS_PREFIX=$XORG_PREFIX install</kbd></pre>
        <p>
          Si vous le désirez, installez la documentation facultative en
          lançant les commandes suivantes en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">install -v -dm755 /usr/share/doc/mesa-18.3.3 &amp;&amp;
cp -rfv docs/* /usr/share/doc/mesa-18.3.3</kbd></pre>
      </div>
      <div class="commands" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Explication des commandes
        </h2>
        <p>
          <em class="parameter"><code>CFLAGS="-O2"
          CXXFLAGS="-O2"</code></em>&nbsp;: Par défaut, <span class=
          "application">Autoconf</span> initialise CFLAGS et CXXFLAGS à "-g
          -O2". Ce qui fait que les binaires et les bibliothèques sont
          construits avec les symboles de débogage, ce qui les rend plus
          gros. Écrasez les valeurs par défaut pour ne pas utiliser le
          drapeau -g du compilateur et que les bibliothèques soient plus
          légères.
        </p>
        <p>
          <em class="parameter"><code>LDFLAGS=-lLLVM</code></em>&nbsp;: Cette
          variable d'environnement spécifie les bibliothèques LLVM qui ne
          sont pas automatiquement incluses pour certains composants du
          paquet.
        </p>
        <p>
          <em class="parameter"><code>--enable-osmesa</code></em>&nbsp;: Ce
          paramètre active la construction de la bibliothèque <code class=
          "filename">libOSMesa</code>.
        </p>
        <p>
          <em class="parameter"><code>--enable-xa</code></em>&nbsp;: Ce
          paramètre active la construction de l'API XA X Acceleration (Requis
          pour le pilote VMware 3D).
        </p>
        <p>
          <em class="parameter"><code>--enable-gbm</code></em>&nbsp;: Ce
          paramètre active la construction de la bibliothèque de gestion des
          tampons graphiques de <span class="application">Mesa</span>.
        </p>
        <p>
          <em class="parameter"><code>--enable-glx-tls</code></em>&nbsp;: Ce
          paramètre active le support TLS (Thread Local Storage) dans GLX.
        </p>
        <p>
          <em class=
          "parameter"><code>--with-platforms="..."</code></em>&nbsp;: Ce
          paramètre contrôle pour quelle plate-forme EGL devra être
          construit. Les plate-formes disponibles sont drm, x11 et wayland.
        </p>
        <p>
          <em class=
          "parameter"><code>--with-gallium-drivers="..."</code></em>&nbsp;:
          Ce paramètre contrôle quels pilotes Gallium3D doivent être
          construits.
        </p>
        <p>
          <code class="option">--enable-sysfs</code>&nbsp;: Utilisez ce
          paramètre pour activer la méthode d'identification simple de PCI,
          demandé pour construire le DRI sur les systèmes dans udev.
        </p>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contenu
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programmes installés:</strong>
              <span class="segbody">glxgears et glxinfo</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèques installées:</strong>
              <span class="segbody">libEGL.so, libgbm.so, libglapi.so,
              libGLESv1_CM.so, libGLESv2.so, libGL.so, libOSMesa.so,
              libwayland-egl.so (s'il est construit avec <span class=
              "application">Wayland</span>) libxatracker.so,
              libXvMCnouveau.so et libXvMCr600.so</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class=
              "segbody">$XORG_PREFIX/{include/{EGL,GL,GLES,GLES2,GLES3,KHR},lib/{dri,vdpau}}
              et /usr/share/doc/mesa-18.3.3 (facultatif)</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="glxgears" name="glxgears"></a><span class=
                    "term"><span class=
                    "command"><strong>glxgears</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est une démo GL utile pour dépanner des problèmes
                    graphiques.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="glxinfo" name="glxinfo"></a><span class=
                    "term"><span class=
                    "command"><strong>glxinfo</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un programme de diagnostic affichant des informations
                    sur le matériel graphique et les bibliothèques GL
                    installées.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libEGL" name="libEGL"></a><span class=
                    "term"><code class="filename">libEGL.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    fournit nativement une interface de plate-forme graphique
                    qui est définie avec les spécifications EGL-1.4.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libgbm" name="libgbm"></a><span class=
                    "term"><code class="filename">libgbm.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    est la bibliothèque de gestion du tampon graphique de
                    <span class="application">Mesa</span>.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libGLESv1_CM" name="libGLESv1_CM"></a><span class=
                    "term"><code class=
                    "filename">libGLESv1_CM.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    est la bibliothèque OpenGL ES 1.1 de <span class=
                    "application">Mesa</span>.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libGLES2" name="libGLES2"></a><span class=
                    "term"><code class="filename">libGLES2.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    est la bibliothèque OpenGL ES 2.0 de <span class=
                    "application">Mesa</span>.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libGL" name="libGL"></a><span class=
                    "term"><code class="filename">libGL.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    est la bibliothèque OpenGL principale de <span class=
                    "application">Mesa</span>.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libOSMesa" name="libOSMesa"></a><span class=
                    "term"><code class="filename">libOSMesa.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    est la bibliothèque de rendu hors-écran de <span class=
                    "application">Mesa</span>.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libxatracker" name="libxatracker"></a><span class=
                    "term"><code class=
                    "filename">libxatracker.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    est la bibliothèque d'accélération de Xorg Gallium3D.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on 2019-02-15 21:01:29 +0000
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="xcb-util-cursor.html" title=
          "xcb-util-cursor-0.1.3">Précédent</a>
          <p>
            xcb-util-cursor-0.1.3
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="xbitmaps.html" title=
          "xbitmaps-1.1.2">Suivant</a>
          <p>
            xbitmaps-1.1.2
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="installing.html" title=
          "Chapitre&nbsp;24.&nbsp;Environnement X Window System">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà&nbsp;de Linux® From Scratch - Version 8.4">Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
