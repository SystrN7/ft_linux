<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      Lua-5.3.5
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-8.4">
    <div class="navheader">
      <h4>
        Au-delà&nbsp;de Linux<sup>®</sup> From Scratch - Version 8.4
      </h4>
      <h3>
        Chapitre&nbsp;13.&nbsp;Programmation
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="llvm.html" title="LLVM-7.0.1">Précédent</a>
          <p>
            LLVM-7.0.1
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="mercurial.html" title=
          "Mercurial-4.9">Suivant</a>
          <p>
            Mercurial-4.9
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapitre&nbsp;13.&nbsp;Programmation">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà&nbsp;de Linux® From Scratch - Version 8.4">Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="lua" name="lua"></a>Lua-5.3.5
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à Lua
        </h2>
        <p>
          <span class="application">Lua</span> est un langage de
          programmation puissant et assez léger conçu pour les extensions
          d'applications. Il est aussi souvent utilisé de façon plus générale
          en langage utilisé seul. <span class="application">Lua</span> est
          implémenté comme une petite bibliothèque de fonction C, écrite en C
          ANSI, et compilé sans modification sur toutes les plate-formes
          connues. Les buts de l'implémentation sont simplicité, efficacité,
          portabilité, et coût d'embarquement faible. Le résultat est un
          moteur de langage rapide avec de petites empreinte, le rendant
          idéal pour les systèmes embarqués.
        </p>
        <p>
          Ce paquet est connu pour se construire correctement sur une
          plateforme LFS-8.4.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "http://www.lua.org/ftp/lua-5.3.5.tar.gz">http://www.lua.org/ftp/lua-5.3.5.tar.gz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=""></a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                4f4b4f323fd3514a68e0ab3da8ce3455
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 300 Ko
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 4.5 Mo (avec les
                tests Basic)
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: moins de 0.1 SBU
                (avec les tests Basic)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Téléchargements supplémentaires
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Correctif requis&nbsp;: <a class="ulink" href=
                "http://www.linuxfromscratch.org/patches/blfs/8.4/lua-5.3.5-shared_library-1.patch">
                http://www.linuxfromscratch.org/patches/blfs/8.4/lua-5.3.5-shared_library-1.patch</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement de la suite de tests facultative (HTTP)&nbsp;:
                <a class="ulink" href=
                "http://www.lua.org/tests/lua-5.3.4-tests.tar.gz">http://www.lua.org/tests/lua-5.3.4-tests.tar.gz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement de la suite de tests facultative (FTP)&nbsp;:
                <a class="ulink" href=""></a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme MD5 de la suite de tests facultative&nbsp;:
                b14fe3748c1cb2d74e3acd1943629ba3
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille de la suite de tests facultative&nbsp;: 104 Ko
              </p>
            </li>
          </ul>
        </div>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "http://wiki.linuxfromscratch.org/blfs/wiki/lua">http://wiki.linuxfromscratch.org/blfs/wiki/lua</a>
        </p>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de Lua
        </h2>
        <p>
          Quelques paquets vérifient le fichier <span class=
          "application">pkg-config</span> pour <span class=
          "application">Lua</span>, qui est créé avec&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">cat &gt; lua.pc &lt;&lt; "EOF"
<code class="literal">V=5.3
R=5.3.5

prefix=/usr
INSTALL_BIN=${prefix}/bin
INSTALL_INC=${prefix}/include
INSTALL_LIB=${prefix}/lib
INSTALL_MAN=${prefix}/share/man/man1
INSTALL_LMOD=${prefix}/share/lua/${V}
INSTALL_CMOD=${prefix}/lib/lua/${V}
exec_prefix=${prefix}
libdir=${exec_prefix}/lib
includedir=${prefix}/include

Name: Lua
Description: An Extensible Extension Language
Version: ${R}
Requires:
Libs: -L${libdir} -llua -lm -ldl
Cflags: -I${includedir}</code>
EOF</kbd></pre>
        <p>
          Installez <span class="application">Lua</span> en lançant les
          commandes suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">patch -Np1 -i ../lua-5.3.5-shared_library-1.patch &amp;&amp;
sed -i '/#define LUA_ROOT/s:/usr/local/:/usr/:' src/luaconf.h &amp;&amp;

make MYCFLAGS="-DLUA_COMPAT_5_2 -DLUA_COMPAT_5_1" linux</kbd></pre>
        <p>
          Pour tester les résultats, lancez&nbsp;: <span class=
          "command"><strong>make test</strong></span>. <span class=
          "quote">«&nbsp;<span class="quote">Cela lancera l'interpréteur et
          affichera sa version.</span>&nbsp;»</span> Des tests plus amples
          peuvent être lancés si vous avez téléchargé l'archive de suite de
          tests. Ces tests doivent être exécutés après que le paquet est
          installé, aussi nous reportons le détail des instructions plus bas.
        </p>
        <p>
          Maintenant, en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root">
<kbd class="command">make INSTALL_TOP=/usr                \
     INSTALL_DATA="cp -d"            \
     INSTALL_MAN=/usr/share/man/man1 \
     TO_LIB="liblua.so liblua.so.5.3 liblua.so.5.3.4" \
     install &amp;&amp;


mkdir -pv                      /usr/share/doc/lua-5.3.5 &amp;&amp;
cp -v doc/*.{html,css,gif,png} /usr/share/doc/lua-5.3.5 &amp;&amp;

install -v -m644 -D lua.pc /usr/lib/pkgconfig/lua.pc</kbd></pre>
        <p>
          Nous n'allons décrire que les "tests Basic". Décompressez l'archive
          et changez de répertoire pour <code class=
          "filename">lua-5.3.5-tests</code>, puis lancez <span class=
          "command"><strong>lua -e"_U=true" all.lua</strong></span>. Si les
          tests finissent sans erreur, vous verrez un message contenant la
          chaîne "final OK" à la fin.
        </p>
      </div>
      <div class="commands" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Explication des commandes
        </h2>
        <p>
          <span class="command"><strong>sed -i ...
          src/luaconf.h</strong></span>&nbsp;: Cette commande modifie le
          chemin de recherche de <span class="application">Lua</span> pour
          correspondre au chemin d'installation.
        </p>
        <p>
          <code class="envar">MYCFLAGS="-DLUA_COMPAT_5_2
          -DLUA_COMPAT_5_1"</code>&nbsp;: Cette variable d'environnement
          inclut les couches de compatibilité Lua 5.1 et 5.2 dans la
          construction.
        </p>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contenu
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programmes installés:</strong>
              <span class="segbody">lua et luac</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèque installée:</strong>
              <span class="segbody">liblua.so</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class="segbody">/usr/{lib,share}/lua et
              /usr/share/doc/lua-5.3.5</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="lua-prog" name="lua-prog"></a><span class=
                    "term"><span class=
                    "command"><strong>lua</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est l'interpréteur Lua indépendant.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="luac" name="luac"></a><span class=
                    "term"><span class=
                    "command"><strong>luac</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est le compilateur Lua.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="liblua" name="liblua"></a><span class=
                    "term"><code class="filename">liblua.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    contient les fonctions de l'API de <span class=
                    "application">Lua</span>
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on 2019-02-15 21:01:29 +0000
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="llvm.html" title="LLVM-7.0.1">Précédent</a>
          <p>
            LLVM-7.0.1
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="mercurial.html" title=
          "Mercurial-4.9">Suivant</a>
          <p>
            Mercurial-4.9
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapitre&nbsp;13.&nbsp;Programmation">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà&nbsp;de Linux® From Scratch - Version 8.4">Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
