<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      NetworkManager-1.14.6
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-8.4">
    <div class="navheader">
      <h4>
        Au-delà&nbsp;de Linux<sup>®</sup> From Scratch - Version 8.4
      </h4>
      <h3>
        Chapitre&nbsp;16.&nbsp;Outils réseaux
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="bind-utils.html" title=
          "BIND Utilities-9.12.3-P4">Précédent</a>
          <p>
            BIND Utilities-9.12.3-P4
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="nmap.html" title="Nmap-7.70">Suivant</a>
          <p>
            Nmap-7.70
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="netutils.html" title=
          "Chapitre&nbsp;16.&nbsp;Outils réseaux">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà&nbsp;de Linux® From Scratch - Version 8.4">Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="NetworkManager" name=
        "NetworkManager"></a>NetworkManager-1.14.6
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à NetworkManager
        </h2>
        <p>
          <span class="application">NetworkManager</span> est un ensemble
          d'outils associés qui simplifient et rendent le réseau plus
          directement gérable. Que ce soit en Wifi, filaire, 3G ou Bluetooth,
          NetworkManager vous permet de passer rapidement d'un réseau à
          l'autre&nbsp;: une fois qu'un réseau a été configuré et qu'on s'y
          est relié une fois, on peut le détecter et s'y reconnecter
          automatiquement la prochaine fois qu'il sera disponible.
        </p>
        <p>
          Ce paquet est connu pour se construire correctement sur une
          plateforme LFS-8.4.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "http://ftp.gnome.org/pub/gnome/sources/NetworkManager/1.14/NetworkManager-1.14.6.tar.xz">
                http://ftp.gnome.org/pub/gnome/sources/NetworkManager/1.14/NetworkManager-1.14.6.tar.xz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=
                "ftp://ftp.gnome.org/pub/gnome/sources/NetworkManager/1.14/NetworkManager-1.14.6.tar.xz">
                ftp://ftp.gnome.org/pub/gnome/sources/NetworkManager/1.14/NetworkManager-1.14.6.tar.xz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                6881d04fe72e09a98bd9bfb26813544b
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 4.2 Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 662 Mo (avec les
                tests)
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: 1.0 SBU (avec les
                tests)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Dépendances de NetworkManager
        </h3>
        <h4>
          Requises
        </h4>
        <p class="required">
          <a class="xref" href="../general/dbus-glib.html" title=
          "dbus-glib-0.110">dbus-glib-0.110</a> et <a class="xref" href=
          "libndp.html" title="libndp-1.7">libndp-1.7</a>
        </p>
        <h4>
          Recommandées
        </h4>
        <p class="recommended">
          <span class="phrase"><a class="xref" href=
          "../postlfs/consolekit.html" title=
          "ConsoleKit2-1.2.1">ConsoleKit2-1.2.1</a>,</span> <a class="xref"
          href="curl.html" title="cURL-7.64.0">cURL-7.64.0</a>, <a class=
          "xref" href="dhcpcd.html" title="dhcpcd-7.1.1">dhcpcd-7.1.1</a> ou
          <a class="xref" href="dhcp.html" title="DHCP-4.4.1">DHCP-4.4.1</a>
          (seulement le client), <a class="xref" href=
          "../general/gobject-introspection.html" title=
          "gobject-introspection-1.58.3">gobject-introspection-1.58.3</a>,
          <a class="xref" href="../postlfs/iptables.html" title=
          "Iptables-1.8.2">Iptables-1.8.2</a>, <a class="xref" href=
          "../general/newt.html" title="newt-0.52.20">newt-0.52.20</a> (pour
          <span class="command"><strong>nmtui</strong></span>), <a class=
          "xref" href="../postlfs/nss.html" title=
          "NSS-3.42.1">NSS-3.42.1</a>, <a class="xref" href=
          "../postlfs/polkit.html" title="Polkit-0.115">Polkit-0.115</a>,
          <a class="xref" href="../general/python-modules.html#pygobject3"
          title="PyGObject-3.30.4">PyGObject-3.30.4</a>, <a class="xref"
          href="../general/upower.html" title=
          "UPower-0.99.9">UPower-0.99.9</a>, <a class="xref" href=
          "../general/vala.html" title="Vala-0.42.5">Vala-0.42.5</a> et
          <a class="xref" href="wpa_supplicant.html" title=
          "wpa_supplicant-2.7">wpa_supplicant-2.7</a> (construit avec le
          support de D-Bus),
        </p>
        <h4>
          Facultatives
        </h4>
        <p class="optional">
          <a class="xref" href="../general/bluez.html" title=
          "BlueZ-5.50">BlueZ-5.50</a>, <a class="xref" href=
          "../general/python-modules.html#dbus-python" title=
          "D-Bus Python-1.2.8">D-Bus Python-1.2.8</a> (pour la suite de
          tests), <a class="xref" href="../postlfs/gnutls.html" title=
          "GnuTLS-3.6.6">GnuTLS-3.6.6</a> (utilisé si <a class="xref" href=
          "../postlfs/nss.html" title="NSS-3.42.1">NSS-3.42.1</a> n'est pas
          trouvé), <a class="xref" href="../general/gtk-doc.html" title=
          "GTK-Doc-1.29">GTK-Doc-1.29</a>, <a class="xref" href=
          "../general/jansson.html" title="Jansson-2.12">jansson-2.12</a>,
          <a class="xref" href="libpsl.html" title=
          "libpsl-0.20.2">libpsl-0.20.2</a>, <a class="xref" href=
          "../x/qt5.html" title="Qt-5.12.1">Qt-5.12.1</a> (pour les
          exemples), <a class="xref" href="../general/ModemManager.html"
          title="ModemManager-1.10.0">ModemManager-1.10.0</a>, <a class=
          "xref" href="../general/valgrind.html" title=
          "Valgrind-3.14.0">Valgrind-3.14.0</a>, <a class="ulink" href=
          "http://www.thekelleys.org.uk/dnsmasq/doc.html">dnsmasq</a>,
          <a class="ulink" href=
          "https://github.com/Distrotech/libaudit">libaudit</a>, <a class=
          "ulink" href="https://github.com/jpirko/libteam">libteam</a>,
          <a class="ulink" href="https://www.samba.org/ftp/ppp/">PPP</a> et
          <a class="ulink" href=
          "https://dianne.skoll.ca/projects/rp-pppoe/">RP-PPPoE</a>
        </p>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "http://wiki.linuxfromscratch.org/blfs/wiki/NetworkManager">http://wiki.linuxfromscratch.org/blfs/wiki/NetworkManager</a>
        </p>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de NetworkManager
        </h2>
        <p>
          Si <a class="xref" href="../x/qt5.html" title=
          "Qt-5.12.1">Qt-5.12.1</a> est installé et que les exemples basés
          sur Qt sont désirés, corrigez le script configure&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">sed -e '/Qt[CDN]/s/Qt/Qt5/g'       \
    -e 's/-qt4/-qt5/'              \
    -e 's/moc_location/host_bins/' \
    -i examples/C/qt/meson.build</kbd></pre>
        <p>
          Corrigez l'absence d'un fichier meson.build pour les crochets de
          l'initrd (inutilisés dans BLFS)&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">sed '/initrd/d' -i src/meson.build</kbd></pre>
        <p>
          Corrigez les scripts python pour qu'ils utilisent <span class=
          "application">Python 3</span>&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">grep -rl '^#!.*python$' | xargs sed -i '1s/python/&amp;3/'</kbd></pre>
        <p>
          Installez <span class="application">NetworkManager</span> en
          lançant les commandes suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">mkdir build &amp;&amp;
cd build    &amp;&amp;

CXXFLAGS+="-O2 -fPIC"            \
meson --prefix /usr              \
      --sysconfdir /etc          \
      --localstatedir /var       \
      -Djson_validation=false    \
      -Dlibaudit=no              \
      -Dlibnm_glib=true          \
      -Dlibpsl=false             \
      -Dnmtui=true               \
      -Dovs=false                \
      -Dppp=false                \
      -Dselinux=false            \
      -Dudev_dir=/lib/udev       \
      -Dsession_tracking=no      \
      -Dmodem_manager=false      \
      -Dsystemdsystemunitdir=no  \
      -Dsystemd_journal=false    \
      -Dqt=false                 \
      .. &amp;&amp;
ninja</kbd></pre>
        <p>
          Une session <span class="phrase">graphique</span> déjà active avec
          une adresse bus est nécessaire pour lancer les tests. Pour tester
          les résultats, tapez&nbsp;: <span class="command"><strong>ninja
          test</strong></span>.
        </p>
        <p>
          Maintenant, en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class="command">ninja install &amp;&amp;
mv -v /usr/share/doc/NetworkManager{,-1.14.6}</kbd></pre>
      </div>
      <div class="commands" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Explication des commandes
        </h2>
        <p>
          <code class="envar">CXXFLAGS="-O2 -fPIC"</code>&nbsp;: Ces option
          du compilateur sont nécessaires pour construire les exemples basés
          sur Qt5.
        </p>
        <p>
          <code class="option">-Ddocs=true</code>&nbsp;: Utilisez ce
          paramètre pour activer la construction des pages de manuels et de
          la documentation si <a class="xref" href="../general/gtk-doc.html"
          title="GTK-Doc-1.29">GTK-Doc-1.29</a> est installé.
        </p>
        <p>
          <em class="parameter"><code>-Dnmtui=true</code></em>&nbsp;: Ce
          paramètre active la construction de <span class=
          "command"><strong>nmtui</strong></span>.
        </p>
        <p>
          <em class="parameter"><code>-Dsession_tracking=no</code></em>,
          <em class="parameter"><code>-Dsystemdsystemunitdir=no</code></em>
          et <em class=
          "parameter"><code>-Dsystemd_journal=false</code></em>&nbsp;:
          systemd n'est pas utilisé par les systèmes sysv init.
        </p>
        <p>
          <em class="parameter"><code>-Djson_validation=false</code></em>,
          <em class="parameter"><code>-Dlibpsl=false</code></em> et
          <em class="parameter"><code>-Dovs=false</code></em>&nbsp;: Ces
          paramètres désactivent la construction des bibliothèques
          respectives. Supprimez-le si vous avez installé les bibliothèques
          requises.
        </p>
        <p>
          <em class=
          "parameter"><code>-Dmodem_manager=false</code></em>&nbsp;: Ce
          paramètre est requis si <span class=
          "application">ModemManager</span> n'est pas installé. Supprimez-le
          si vous avez construit <span class=
          "application">ModemManager</span>.
        </p>
        <p>
          <em class="parameter"><code>-Dppp=false</code></em>&nbsp;: Ce
          paramètre désactive le support de <span class=
          "application">PPP</span> dans <span class=
          "application">NetworkManager</span>.
        </p>
        <p>
          <em class="parameter"><code>-Dlibaudit=no</code></em> et <em class=
          "parameter"><code>-Dselinuk=false</code></em>&nbsp;: jibaudit et
          SELinux ne sont pas utilisés dans BLFS.
        </p>
        <p>
          <em class="parameter"><code>-Dqt=false</code></em>&nbsp;: Ce
          paramètre désactive les exemples de <span class=
          "application">Qt</span>. Supprimez-le si <span class=
          "application">Qt</span> est disponible et que vous voulez installer
          les exemples.
        </p>
      </div>
      <div class="configuration" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Configuration de NetworkManager
        </h2>
        <div class="sect3">
          <h3 class="sect3">
            <a id="NetworkManager-config" name=
            "NetworkManager-config"></a>Fichiers de config
          </h3>
          <p>
            <code class=
            "filename">/etc/NetworkManager/NetworkManager.conf</code>
          </p>
        </div>
        <div class="sect3">
          <h3 class="sect3">
            Informations de configuration
          </h3>
          <p>
            Pour que <span class="application">NetworkManager</span>
            fonctionne, il faut qu'il y ait au moins un fichier de
            configuration minimal. Ce fichier n'est pas installé par
            <span class="command"><strong>make install</strong></span>.
            Lancez la commande suivante en tant qu'utilisateur <code class=
            "systemitem">root</code> pour créer un fichier <code class=
            "filename">NetworkManager.conf</code> minimal&nbsp;:
          </p>
          <pre class="root"><kbd class=
          "command">cat &gt;&gt; /etc/NetworkManager/NetworkManager.conf &lt;&lt; "EOF"
<code class="literal">[main]
plugins=keyfile</code>
EOF</kbd></pre>
          <p>
            Ce fichier ne devrait pas être modifié directement par les
            utilisateurs du système. À la place, les changements spécifiques
            au système devraient être effectués dans le répertoire
            <code class="filename">/etc/NetworkManager/conf.d</code>.
          </p>
          <p>
            Pour permettre à polkit de gérer les autorisations, ajoutez le
            fichier de configuration suivant&nbsp;:
          </p>
          <pre class="root"><kbd class=
          "command">cat &gt; /etc/NetworkManager/conf.d/polkit.conf &lt;&lt; "EOF"
<code class="literal">[main]
auth-polkit=true</code>
EOF</kbd></pre>
          <p>
            Pour utiliser un autre client dhcp que celui inclus (recommandé
            si vous n'utilisez que <span class=
            "command"><strong>nmcli</strong></span>), utilisez la
            configuration suivante (les valeurs valides sont dhcpcd, dhclient
            et internal)&nbsp;:
          </p>
          <pre class="userinput"><kbd class=
          "command">cat &gt; /etc/NetworkManager/conf.d/dhcp.conf &lt;&lt; "EOF"
<code class="literal">[main]
dhcp=</code><em class="replaceable"><code>dhclient</code></em>
EOF</kbd></pre>
          <p>
            Pour éviter que <span class="application">NetworkManager</span>
            ne mette à jour le fichier <code class=
            "filename">/etc/resolv.conf</code>, ajoutez le fichier de
            configuration suivant&nbsp;:
          </p>
          <pre class="userinput"><kbd class=
          "command">cat &gt; /etc/NetworkManager/conf.d/no-dns-update.conf &lt;&lt; "EOF"
<code class="literal">[main]
dns=none</code>
EOF</kbd></pre>
          <p>
            Pour trouver des options de configuration supplémentaires, voir
            <span class="command"><strong>man 5
            NetworkManager.conf</strong></span>.
          </p>
          <p>
            Pour permettre aux utilisateurs normaux de configurer les
            connections réseau, vous devriez les ajouter au groupe
            <code class="systemitem">netdev</code> et créer une règle
            <span class="application">polkit</span> qui accorde l'accès.
            Lancez les commandes suivantes en tant qu'utilisateur
            <code class="systemitem">root</code>&nbsp;:
          </p>
          <pre class="root"><kbd class=
          "command">groupadd -fg 86 netdev &amp;&amp;
/usr/sbin/usermod -a -G netdev <em class=
"replaceable"><code>&lt;username&gt;</code></em>

cat &gt; /usr/share/polkit-1/rules.d/org.freedesktop.NetworkManager.rules &lt;&lt; "EOF"
<code class="literal">polkit.addRule(function(action, subject) {
    if (action.id.indexOf("org.freedesktop.NetworkManager.") == 0 &amp;&amp; subject.isInGroup("netdev")) {
        return polkit.Result.YES;
    }
});</code>
EOF</kbd></pre>
        </div>
        <div class="sect3">
          <h3 class="sect3">
            <a id="NetworkManager-init" name="NetworkManager-init"></a>Script
            de démarrage
          </h3>
          <p>
            Pour démarrer automatiquement le démon <span class=
            "command"><strong>NetworkManager</strong></span> au redémarrage
            du système, installez le script de démarrage <code class=
            "filename">/etc/rc.d/init.d/networkmanager</code> du paquet
            <a class="xref" href="../introduction/bootscripts.html" title=
            "Scripts de démarrage BLFS">blfs-bootscripts-20180105</a>.
          </p>
          <div class="admon note">
            <img alt="[Note]" src="../images/note.png" />
            <h3>
              Note
            </h3>
            <p>
              Si vous utilisez <span class="application">Network
              Manager</span> pour gérer une interface, toute configuration
              précédente pour cette interface devrait être supprimée et
              l'interface être éteinte avant de démarrer <span class=
              "application">Network Manager</span>.
            </p>
          </div>
          <pre class="root"><kbd class=
          "command">make install-networkmanager</kbd></pre>
        </div>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contenu
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programmes installés:</strong>
              <span class="segbody">NetworkManager, nmcli, nm-online, nmtui
              et, liés en dur à nmtui&nbsp;: nmtui-connect, nmtui-edit et
              nmtui-hostname</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèques installées:</strong>
              <span class="segbody">libnm.so et divers greffons dans
              /usr/lib/NetworkManager</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class="segbody">/etc/NetworkManager, /usr/include/libnm,
              /usr/lib/NetworkManager, /usr/share/doc/NetworkManager-1.14.6,
              /usr/share/gtk-doc/html/{libnm,NetworkManager} (si la
              documentation est construite) et /var/lib/NetworkManager</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="nmcli" name="nmcli"></a><span class=
                    "term"><span class=
                    "command"><strong>nmcli</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un outil en ligne de commande pour contrôler
                    <span class="application">NetworkManager</span> et
                    obtenir son état.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="nm-online" name="nm-online"></a><span class=
                    "term"><span class=
                    "command"><strong>nm-online</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un outil pour savoir si on est connecté.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="nmtui" name="nmtui"></a><span class=
                    "term"><span class=
                    "command"><strong>nmtui</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est une interface basée sur ncurses pour <span class=
                    "application">nmcli</span>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="nmtui-connect" name=
                    "nmtui-connect"></a><span class="term"><span class=
                    "command"><strong>nmtui-connect</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est une interface interactive basée sur ncurses pour
                    activer/désactiver les connexions.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="nmtui-edit" name="nmtui-edit"></a><span class=
                    "term"><span class=
                    "command"><strong>nmtui-edit</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est une interface interactive basée sur ncurses pour
                    éditer les connexions.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="nmtui-hostname" name=
                    "nmtui-hostname"></a><span class="term"><span class=
                    "command"><strong>nmtui-hostname</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est une interface interactive basée sur ncurses pour
                    éditer le nom d'hôte.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="NetworkManager-prog" name=
                    "NetworkManager-prog"></a><span class="term"><span class=
                    "command"><strong>NetworkManager</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est le démon de gestion réseau.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libnm" name="libnm"></a><span class=
                    "term"><code class="filename">libnm.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    contient des fonctions utilisées par <span class=
                    "application">NetworkManager</span>.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on 2019-02-26 17:56:18 +0000
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="bind-utils.html" title=
          "BIND Utilities-9.12.3-P4">Précédent</a>
          <p>
            BIND Utilities-9.12.3-P4
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="nmap.html" title="Nmap-7.70">Suivant</a>
          <p>
            Nmap-7.70
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="netutils.html" title=
          "Chapitre&nbsp;16.&nbsp;Outils réseaux">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà&nbsp;de Linux® From Scratch - Version 8.4">Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
