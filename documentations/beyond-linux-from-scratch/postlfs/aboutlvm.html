<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      À propos de la gestion des volumes logiques (LVM)
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-8.4">
    <div class="navheader">
      <h4>
        Au-delà&nbsp;de Linux<sup>®</sup> From Scratch - Version 8.4
      </h4>
      <h3>
        Chapitre&nbsp;5.&nbsp;Systèmes de fichiers et gestion de disque
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="lvm2.html" title=
          "LVM2-2.03.02">Précédent</a>
          <p>
            LVM2-2.03.02
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="raid.html" title=
          "À propos du RAID">Suivant</a>
          <p>
            À propos du RAID
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="filesystems.html" title=
          "Chapitre&nbsp;5.&nbsp;Systèmes de fichiers et gestion de disque">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà&nbsp;de Linux® From Scratch - Version 8.4">Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="aboutlvm" name="aboutlvm"></a>À propos de la gestion des
        volumes logiques (LVM)
      </h1>
      <p>
        LVM gère les disques durs. Il permet que de multiples disques et
        partitions soient combinés dans de gros <span class=
        "emphasis"><em>groupes de volumes</em></span>, assiste la création de
        sauvegardes au travers de <span class=
        "emphasis"><em>snapshot</em></span>, et permet le redimensionnement
        dynamique des volumes. Il peut également fournir une fonction de
        miroir similaire à une grappe de RAID 1.
      </p>
      <p>
        Une présentation complète de LVM est au-delà de la portée de cette
        introduction, mais les concepts de base sont présentés ci-dessous.
      </p>
      <p>
        Pour exécuter chacune des commandes présentées ici, le paquet
        <a class="xref" href="lvm2.html" title=
        "LVM2-2.03.02">LVM2-2.03.02</a> doit être installé. Toutes les
        commandes doivent être lancées en tant qu'utilisateur <code class=
        "systemitem">root</code>.
      </p>
      <p>
        La gestion des disques avec LVM est accomplie en utilisant les
        concepts suivants&nbsp;:
      </p>
      <div class="variablelist">
        <dl class="variablelist">
          <dt>
            <span class="term">Volumes physiques</span>
          </dt>
          <dd>
            <p>
              Il y a des disques ou des partitions physiques comme /dev/sda3
              ou /dev/sdb.
            </p>
          </dd>
          <dt>
            <span class="term">Groupes de volumes</span>
          </dt>
          <dd>
            <p>
              On appelle groupes de volumes physiques ce qui peut être
              manipulé par l'administrateur. Le nombre de volumes physiques
              qui constituent un groupe de volumes est arbitraire. Les
              volumes physiques peuvent être dynamiquement ajoutés ou
              supprimés à partir d'un groupe de volumes.
            </p>
          </dd>
          <dt>
            <span class="term">Volumes logique</span>
          </dt>
          <dd>
            <p>
              Les groupes de volume peuvent être divisés en volumes logiques.
              Chaque volume logique peut être ainsi formaté individuellement
              comme s'il s'agissait d'une partition Linux normal. Les volumes
              logiques peuvent être redimensionné dynamiquement par
              l'administrateur en fonction des besoins.
            </p>
          </dd>
        </dl>
      </div>
      <p>
        Pour donner un exemple concret, supposez que vous ayez deux disques
        de 2 To. Supposons également qu'une grande quantité d'espace est
        nécessaire pour une très grosse base de données, montée en
        <code class="filename">/srv/mysql</code>. Voilà à quoi rassemblerait
        l'ensemble des initialisations des partitions&nbsp;:
      </p>
      <pre class="screen"><code class=
      "literal">Partition  Use    Size      Partition Type
/dev/sda1  /boot  100MB     83 (Linux)
/dev/sda2  /       10GB     83 (Linux)
/dev/sda3  swap     2GB     82 (Swap)
/dev/sda4  LVM    remainder 8e (LVM)
/dev/sdb1  swap     2GB     82 (Swap)
/dev/sdb2  LVM    remainder 8e (LVM)</code></pre>
      <p>
        En premier initialisez les volumes physiques&nbsp;:
      </p>
      <pre class="userinput"><kbd class=
      "command">pvcreate /dev/sda4 /dev/sdb2</kbd></pre>
      <p>
        Ensuite créez un groupe de volume appelé lfs-lvm:
      </p>
      <pre class="userinput"><kbd class=
      "command">vgcreate lfs-lvm /dev/sda4  /dev/sdb2</kbd></pre>
      <p>
        L'état du groupe de volumes peut être vérifié en lançant la commande
        <span class="command"><strong>vgscan</strong></span>. Maintenant
        créez les volumes logiques. Comme il y a environ 3900 Go d'espace
        disponible, laissez environ 900 Go d'espace libre pour l'expansion.
        Notez que le volume logique appelé <span class=
        "emphasis"><em>mysql</em></span> est plus grand que chacun des
        disques physiques.
      </p>
      <pre class="userinput"><kbd class=
      "command">lvcreate --name mysql --size 2500G lfs-lvm
lvcreate --name home  --size  500G lfs-lvm</kbd></pre>
      <p>
        Finalement les volumes logiques peuvent être formatés et montés. Dans
        cet exemple, Le système de fichier jfs (<a class="xref" href=
        "jfsutils.html" title="jfsutils-1.1.15">jfsutils-1.1.15</a>) est
        utilisé pour la démonstration.
      </p>
      <pre class="userinput"><kbd class=
      "command">mkfs -t ext4 /dev/lfs-lvm/home
mkfs -t jfs  /dev/lfs-lvm/mysql
mount /dev/lfs-lvm/home /home
mkdir -p /srv/mysql
mount /dev/lfs-lvm/mysql /srv/mysql</kbd></pre>
      <p>
        Les scripts de démarrage de LFS rendront automatiquement ces systèmes
        de fichiers disponible pour les scripts checkfs. L'édition du fichier
        <code class="filename">/etc/fstab</code> est nécessaire pour
        automatiquement le monter.
      </p>
      <p>
        Un volume logique peut accueillir un système de fichier racine, mais
        nécessite l'utilisation d'un initramfs (initial RAM file system) et
        cela n'est pas présenté ici.
      </p>
      <p>
        Pour plus d'information sur LVM, voir le <a class="ulink" href=
        "http://www.tldp.org/HOWTO/LVM-HOWTO/">LVM HOWTO</a> et les pages de
        manuel lvm.
      </p>
      <p class="updated">
        Last updated on 2013-02-11 18:51:17 +0000
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="lvm2.html" title=
          "LVM2-2.03.02">Précédent</a>
          <p>
            LVM2-2.03.02
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="raid.html" title=
          "À propos du RAID">Suivant</a>
          <p>
            À propos du RAID
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="filesystems.html" title=
          "Chapitre&nbsp;5.&nbsp;Systèmes de fichiers et gestion de disque">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà&nbsp;de Linux® From Scratch - Version 8.4">Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
